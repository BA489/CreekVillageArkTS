"use strict";var __importDefault=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNDownload=exports.contains=exports.findComponentByPathAndApi=exports.proxyFun=void 0;const hvigor_base_1=require("@ohos/hvigor-base"),sdkmanager_common_1=require("@ohos/sdkmanager-common"),deasync_1=__importDefault(require("deasync")),ohos_logger_js_1=require("../../utils/log/ohos-logger.js"),LOGGER=ohos_logger_js_1.OhosLogger.getLogger("Sdk"),proxyFun=()=>{var o,n,e;const r=hvigor_base_1.GlobalParam.getInstance();return{proxy:r.getConfig("proxy"),httpsProxy:r.getConfig("https-proxy"),noProxy:null!==(e=null!==(n=null!==(o=r.getConfig("noproxy"))&&void 0!==o?o:r.getConfig("no-proxy"))&&void 0!==n?n:process.env.NO_PROXY)&&void 0!==e?e:process.env.npm_config_noproxy}};exports.proxyFun=proxyFun;const findComponentByPathAndApi=(o,n)=>{for(const[e,r]of n.entries())if(e.equals(o))return r};exports.findComponentByPathAndApi=findComponentByPathAndApi;const contains=(o,n)=>{for(const[e,r]of n)if(e.equals(o))return r};exports.contains=contains;const getNDownload=(o,n)=>{let e=!1;const r=new Map;try{n.getOrDownload(o).then((o=>{o.forEach(((o,n)=>r.set(n,o))),e=!0})).catch((o=>{LOGGER._buildError(o)._printErrorAndExit(),e=!0})),deasync_1.default.loopWhile((()=>!e))}catch(o){if(o instanceof sdkmanager_common_1.SdkException){const n=o.getErrorTip();LOGGER._buildError(n.getReason())._solution(`${n.getFixSuggestion()}.Open SDK Manager`)._printErrorAndExit()}}return r};exports.getNDownload=getNDownload;