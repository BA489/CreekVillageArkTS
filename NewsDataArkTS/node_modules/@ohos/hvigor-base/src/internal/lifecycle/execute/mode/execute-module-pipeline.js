"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExecuteModulePipeline=void 0;const abstract_execute_pipeline_js_1=require("./abstract-execute-pipeline.js"),sync_js_1=require("../../sync.js"),hvigor_log_js_1=require("../../../../log/hvigor-log.js"),index_js_1=require("../../../../../index.js"),_log=hvigor_log_js_1.HvigorLogger.getLogger("hvigor-module-pipeline");class ExecuteModulePipeline extends abstract_execute_pipeline_js_1.AbstractExecutePipeline{constructor(e,s){super(e,s),this.executeModules=[],this.init()}init(){const e=index_js_1.hvigor.getExtraConfig().get("module");void 0===e?this.executeModules=this.project.getAllSubModules():(this.shouldCheckTask=!0,e.split(",").forEach((e=>{const s=e.split("@"),t=this.project.findModuleByName(s[0]);void 0===t&&_log.errorMessageExit(`Unknown module '${e[0]}' in the command line. Please check.`),this.executeModules.push(t)})))}findPipeAllNeedExecuteSyncTasks(){const e=[];return this.executeModules.forEach((s=>{e.push(...(0,sync_js_1.findSyncTaskPathsForNode)(s))})),e}findPipeAllNeedExecuteTasks(){return this.findAllNeedExecuteTasksForNodes([...this.executeModules])}recordTraceData(){index_js_1.traceBuildAnalyze.moduleNum=this.executeModules.length}}exports.ExecuteModulePipeline=ExecuteModulePipeline;